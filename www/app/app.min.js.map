{"version":3,"sources":["app.js","classes/article.class.js","classes/author.class.js","classes/guest.class.js","classes/manager.class.js","classes/material.class.js","classes/member.class.js","classes/person.class.js","classes/token.class.js","controllers/articles.controller.js","controllers/auth.controller.js","controllers/persons.controller.js","controllers/test.controller.js","directives/article-card.directive.js","directives/article-list.directive.js","directives/article-material.directive.js","directives/avatar-editor.directive.js","directives/avatar.directive.js","directives/file-upload.directive.js","directives/member-list.directive.js","directives/person-card.directive.js","directives/person-list.directive.js","filters/article-search.filter.js","filters/person-search.filter.js","services/articles.service.js","services/auth.service.js","services/file.service.js","services/materials.service.js","services/navigation.service.js","services/persons.service.js"],"names":["_classCallCheck","instance","Constructor","TypeError","app","angular","module","config","$compileProvider","$routeProvider","localStorageServiceProvider","Date","prototype","toRussianString","year","this","getFullYear","month","getMonth","toString","day","getDate","setPrefix","aHrefSanitizationWhitelist","when","templateUrl","otherwise","redirectTo","run","$rootScope","authService","navigationService","redefineHeaders","$on","next","current","$","document","find","remove","constant","STORAGEURL","IMAGES","UNKNOWN","API","BASE","FILEUPLOAD","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","Article","obj","materialsService","Materials","Members","ID","Author","Title","PeriodBegin","PeriodEnd","Comment","addMaterial","_i","addMember","now","sort","Material","Compare","value","result","undefined","material","push","index","indexOf","splice","member","Member","filter","text","regex","RegExp","search","match","parseInt","Avatar","Name","Guest","NameFirst","NameLast","Email","Phone","Login","Password","Hours","ManagerRoleType","User","Supervisor","Admin","Manager","login","password","_roles","role","roles","toLowerCase","inRole","flag","addRole","removeRole","join","get","set","setRole","MaterialType","File","Image","Video","Audio","PDF","Excel","Word","PowerPoint","Text","ZIP","Type","Url","FileName","ContentUrl","ThumbnailUrl","ArticleID","getMaterialContentUrl","getMaterialThumbnailUrl","a","b","Person","nameTotal","Gender","DateBirth","DateDeath","First","Last","Second","Maiden","maiden","Token","Key","Expire","Roles","Values","name","Value","isAuthenticated","isInRole","isAdmin","isSupervisor","controller","$scope","$routeParams","$element","articlesService","navigateToLogin","articles","article","materialToDelete","materialToUpdate","reload","id","getByID","success","data","reloadMediaGallery","bind","reloadAll","getAll","reloadAllByPerson","personID","getAllByPerson","materials","items","type","url","thumbnail","filename","title","date","comment","sxMediaGallery","createArticle","modalClose","navigateToArticleModify","updateArticle","navigateToArticleList","fileUploaded","file","createMaterial","Code","showDeleteMaterialDialog","modal","showUpdateMaterialDialog","deleteMaterial","removeMaterial","updateMaterial","personsService","token","enter","$broadcast","navigateToRoot","exit","logout","getToken","registrationInit","registration","registrationComplete","snackbar","content","timeout","htmlAllowed","showInviteGuestDialog","guest","inviteGuest","PasswordConfirm","style","guestInfo","emailInfo","persons","person","getPerson","getPersons","getArticles","reloadWithArticles","createPerson","navigateToPersonModify","updatePerson","navigateToPersonList","showCreateManagerDialog","manager","createManager","getRolesString","myImage","myCroppedImage","handleFileSelect","evt","currentTarget","files","reader","FileReader","onload","$apply","readAsDataURL","element","querySelector","on","directive","restrict","scope","classes","controllerAs","smallComment","substr","isFilterVisible","editMaterial","require","fileService","getUniqueThumbnailUrl","makeGuid","thumbnailUrl","rotateMaterial","clockwise","avatar","avatarFile","avatarPreview","displayAvatarModal","show","cancel","apply","size","alternate","onClick","$event","stopPropagation","navigateToPersonShow","link","attributes","image","css","width","height","attr","tooltip","URLS","fileCode","multipleFiles","blob","isUploading","uploadingFileName","flow","Flow","headers","Authorization","getTokenKey","query","flowUploadID","singleFile","testChunks","permanentErrors","maxChunkRetries","chunkRetryInterval","simultaneousUploads","chunk","message","fileBlob","JSON","parse","upload","getBlob","download","members","indexOfMember","isNumber","isPerson","existMember","removeMember","input","out","factory","$http","post","personIDs","Persons","localStorageService","setToken","removeToken","_registration","_login","onSuccess","onError","request","error","status","isRedactor","getSASToken","getValue","authorizationHeader","defaults","common","s4","Math","floor","random","substring","getAvatarSrc","startsWith","code","$window","open","articleID","FileCode","materialID","downloadMaterial","transformMaterial","method","argument","Method","Argument","getMaterialUrl","extraParams","extra","suffix","$location","modalID","removeClass","path","navigateToRegistration","navigateToArticleShow","Error"],"mappings":"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","file":"app.min.js","sourcesContent":["'use strict';\r\n\r\nvar app = angular.module('app', ['ngRoute', 'ngImgCrop', 'LocalStorageModule', 'flow']);\r\n\r\napp.config(['$compileProvider', '$routeProvider', 'localStorageServiceProvider',\r\n    function ($compileProvider, $routeProvider, localStorageServiceProvider) {\r\n        Date.prototype.toRussianString = function () {\r\n            let year = this.getFullYear();\r\n            let month = this.getMonth() + 1;\r\n            if (month < 10)\r\n                month = \"0\" + month.toString();\r\n            let day = this.getDate();\r\n\r\n            return day + '.' + month + '.' + year;\r\n        };\r\n\r\n        localStorageServiceProvider.setPrefix('ls.family');\r\n\r\n        $compileProvider.aHrefSanitizationWhitelist(/^\\s*(https?|skype|tel|ftp|mailto|chrome-extension):/);\r\n        // Angular before v1.2 uses $compileProvider.urlSanitizationWhitelist(...)\r\n\r\n        $routeProvider.when('/', {\r\n            templateUrl: 'app/views/person-list.view.html'\r\n        }).when('/registration', {\r\n            templateUrl: 'app/views/registration.view.html'\r\n        }).when('/login', {\r\n            templateUrl: 'app/views/login.view.html'\r\n        }).when('/persons', {\r\n            templateUrl: 'app/views/person-list.view.html'\r\n        }).when('/persons/:id', {\r\n            templateUrl: 'app/views/person-show.view.html'\r\n        }).when('/edit/person/:id', {\r\n            templateUrl: 'app/views/person-edit.view.html'\r\n        }).when('/articles', {\r\n            templateUrl: 'app/views/article-list.view.html'\r\n        }).when('/articles/:id', {\r\n            templateUrl: 'app/views/article-show.view.html'\r\n        }).when('/edit/article/:id', {\r\n            templateUrl: 'app/views/article-edit.view.html'\r\n        }).otherwise({\r\n            redirectTo: '/'\r\n        });\r\n\r\n    }\r\n]);\r\n\r\napp.run(['$rootScope', 'authService', 'navigationService',\r\n    function ($rootScope, authService, navigationService) {\r\n        // setup Token to headers\r\n        authService.redefineHeaders();\r\n\r\n        $rootScope.authService = authService;\r\n        $rootScope.navigationService = navigationService;\r\n\r\n        $rootScope.$on('$routeChangeStart', function (next, current) {\r\n            $(document).find('.sxmg-panel').remove();\r\n        });\r\n    }]);\r\n\r\napp.constant('URLS', {\r\n    STORAGEURL:'https://familyarchivestorage.blob.core.windows.net/',\r\n    IMAGES: {\r\n        UNKNOWN: '/images/unknown.png'\r\n        //AVATAR: '/JQFile/Avatar/'\r\n    },\r\n    API: {\r\n        //BASE: 'http://localhost:62927/api/',\r\n        BASE: 'http://api.family.litskevich.ru/api/',\r\n        FILEUPLOAD: 'file/flow'\r\n    }\r\n});\r\n\r\n\r\n","'use strict';\r\n\r\nclass Article {\r\n    constructor(obj, materialsService) {\r\n        this.Materials = [];\r\n        this.Members = [];\r\n\r\n        if (obj) {\r\n            this.ID = obj.ID;\r\n\r\n            this.Author = new Author(obj.Author);\r\n            this.Date = new Date(obj.Date);\r\n\r\n            this.Title = obj.Title;\r\n            this.PeriodBegin = obj.PeriodBegin ? new Date(obj.PeriodBegin) : null;\r\n            this.PeriodEnd = obj.PeriodEnd ? new Date(obj.PeriodEnd) : null;\r\n            this.Comment = obj.Comment ? obj.Comment : '';\r\n\r\n            if (obj.Materials && obj.Materials.length)\r\n                for (let i = 0; i < obj.Materials.length; i++)\r\n                    this.addMaterial(obj.Materials[i], materialsService);\r\n\r\n            if (obj.Members && obj.Members.length)\r\n                for (let i = 0; i < obj.Members.length; i++)\r\n                    this.addMember(obj.Members[i]);\r\n        }\r\n        else {\r\n            this.ID = 0;\r\n\r\n            this.Author = null;\r\n            this.Date = Date.now();\r\n\r\n            this.Title = '';\r\n            this.PeriodBegin = null;\r\n            this.PeriodEnd = null;\r\n            this.Comment = '';\r\n        }\r\n\r\n        this.Materials = this.Materials.sort(Material.Compare);\r\n    }\r\n\r\n    getDates() {\r\n        let result = '';\r\n\r\n        if (this.PeriodBegin != null && this.PeriodBegin != undefined)\r\n            result += this.PeriodBegin.toRussianString();\r\n\r\n        if (this.PeriodEnd != null && this.PeriodEnd != undefined)\r\n            result += ' - ' + this.PeriodEnd.toRussianString();\r\n\r\n        return result;\r\n    }\r\n\r\n    addMaterial(material, materialsService) {\r\n        this.Materials.push(new Material(material, materialsService));\r\n    }\r\n\r\n    removeMaterial(material) {\r\n        if (material == null || material == undefined)\r\n            return;\r\n\r\n        let index = this.Materials.indexOf(material);\r\n\r\n        if (index >= 0)\r\n            this.Materials.splice(index, 1);\r\n    }\r\n\r\n    addMember(member) {\r\n        this.Members.push(new Member(member));\r\n    }\r\n\r\n    removeMember(member) {\r\n        if (member == null || member == undefined)\r\n            return;\r\n\r\n        let index = this.Members.indexOf(member);\r\n\r\n        if (index >= 0)\r\n            this.Members.splice(index, 1);\r\n    }\r\n\r\n    match(filter) {\r\n        if (!filter || filter == '')\r\n            return true;\r\n\r\n        let text = this.Title + ' ' + this.Comment;\r\n\r\n        let regex = new RegExp(filter, \"i\");\r\n        if (text.search(regex) >= 0)\r\n            return true;\r\n\r\n        for (let i = 0; i < this.Members.length; i++)\r\n            if (this.Members[i].match(filter))\r\n                return true;\r\n\r\n        // search by year\r\n        if (filter.search(/^\\d{4}$/i) == 0) {\r\n            let year = parseInt(filter);\r\n\r\n            if (this.Date.getFullYear() == year)\r\n                return true;\r\n\r\n            if (this.PeriodBegin && this.PeriodBegin.getFullYear() == year)\r\n                return true;\r\n\r\n            if (this.PeriodEnd && this.PeriodEnd.getFullYear() == year)\r\n                return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n}","'use strict';\r\n\r\nclass Author {\r\n\r\n    constructor(obj) {\r\n        if (obj) {\r\n            this.ID = obj.ID;\r\n            this.Avatar = obj.Avatar;\r\n            this.Name = obj.Name;\r\n        }\r\n        else {\r\n            this.ID = 0;\r\n            this.Avatar = null;\r\n            this.Name = '';\r\n        }\r\n    }\r\n}","'use strict';\r\n\r\nclass Guest {\r\n\r\n    constructor() {\r\n        this.NameFirst = '';\r\n        this.NameLast = '';\r\n        this.Email = '';\r\n        this.Phone = '';\r\n        this.Login = 'guest';\r\n        this.Password = '';\r\n        this.Hours = 24;\r\n    }\r\n}","'use strict';\r\n\r\nconst ManagerRoleType = {\r\n    User: 'User',\r\n    Supervisor: 'Supervisor',\r\n    Admin: 'Admin'\r\n};\r\n\r\nclass Manager {\r\n\r\n    constructor(obj) {\r\n        this.login = '';\r\n        this.password = '';\r\n        this._roles = [];\r\n\r\n        if (obj) {\r\n            if (typeof obj == 'string') {\r\n                this.login = obj;\r\n            }\r\n            else {\r\n                this.login = obj.login;\r\n                this.password = obj.password;\r\n            }\r\n        }\r\n\r\n        //this.addRole(ManagerRoleType.User);\r\n    }\r\n\r\n    get roles() {\r\n        if (this._roles == null || this._roles == undefined) {\r\n            this._roles = [];\r\n        }\r\n        return this._roles;\r\n    }\r\n\r\n    inRole(role) {\r\n        if (role == undefined || role == null || role == '' || typeof role != 'string')\r\n            return false;\r\n\r\n        for (let i = 0; i < this.roles.length; i++) {\r\n            if (this.roles[i].toLowerCase() == role.toLowerCase())\r\n                return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    addRole(role) {\r\n        if (role == undefined || role == null || role == '' || typeof role != 'string')\r\n            return;\r\n\r\n        if (!this.inRole(role))\r\n            this.roles.push(role);\r\n    }\r\n\r\n    removeRole(role) {\r\n        if (role == undefined || role == null || role == '' || typeof role != 'string')\r\n            return;\r\n\r\n        for (let i = this.roles.length - 1; i >= 0; i--)\r\n            if (this.roles[i].toLowerCase() == role.toLowerCase())\r\n                this.roles.splice(i, 1);\r\n    }\r\n\r\n    setRole(role, flag) {\r\n        if (role == undefined || role == null || role == '' || typeof role != 'string')\r\n            return;\r\n\r\n        if (flag)\r\n            this.addRole(role);\r\n        else\r\n            this.removeRole(role);\r\n    }\r\n\r\n    getRolesString() {\r\n        return this.roles.join(',');\r\n    }\r\n\r\n    get isUser() {\r\n        return this.inRole(ManagerRoleType.User);\r\n    }\r\n\r\n    set isUser(value) {\r\n        this.setRole(ManagerRoleType.User, value);\r\n    }\r\n\r\n    get isSupervisor() {\r\n        return this.inRole(ManagerRoleType.Supervisor);\r\n    }\r\n\r\n    set isSupervisor(value) {\r\n        this.setRole(ManagerRoleType.Supervisor, value);\r\n    }\r\n\r\n    get isAdmin() {\r\n        return this.inRole(ManagerRoleType.Admin);\r\n    }\r\n\r\n    set isAdmin(value) {\r\n        this.setRole(ManagerRoleType.Admin, value);\r\n    }\r\n}","'use strict';\r\n\r\nconst MaterialType =\r\n{\r\n    File: 'File',\r\n    Image: 'Image',\r\n    Video: 'Video',\r\n    Audio: 'Audio',\r\n    PDF: 'PDF',\r\n    Excel: 'Excel',\r\n    Word: 'Word',\r\n    PowerPoint: 'PowerPoint',\r\n    Text: 'Text',\r\n    ZIP: 'ZIP'\r\n};\r\n\r\nclass Material {\r\n    constructor(obj, materialsService) {\r\n        if (obj) {\r\n            this.ID = obj.ID;\r\n\r\n            this.Type = obj.Type || '';\r\n            this.Url = obj.Url || '';\r\n            this.FileName = obj.FileName || '';\r\n\r\n            this.Date = (obj.Date) ? new Date(obj.Date) : null;\r\n            this.Title = obj.Title;\r\n            this.Comment = obj.Comment ? obj.Comment : '';\r\n\r\n            this.ContentUrl = obj.ContentUrl || '';\r\n            this.ThumbnailUrl = obj.ThumbnailUrl || '';\r\n        }\r\n        else {\r\n            this.ID = 0;\r\n            this.ArticleID = 0;\r\n\r\n            this.Type = '';\r\n            this.Url = '';\r\n            this.FileName = '';\r\n\r\n            this.Date = null;\r\n            this.Title = '';\r\n            this.Comment = '';\r\n\r\n            this.ContentUrl = '';\r\n            this.ThumbnailUrl = '';\r\n        }\r\n\r\n        if (materialsService && this.Url) {\r\n            this.ContentUrl = materialsService.getMaterialContentUrl(this.Url);\r\n            this.ThumbnailUrl = materialsService.getMaterialThumbnailUrl(this.Url);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @return {number}\r\n     */\r\n    static Compare(a, b) {\r\n\r\n        // if no Dates than compare by ID\r\n        if (!a.Date && !b.Date)\r\n            return a.ID - b.ID;\r\n\r\n        // date B is not set, than B later than A\r\n        if (!b.Date)\r\n            return -1;\r\n\r\n        // date A is not set, than A later than B\r\n        if (!a.Date)\r\n            return 1;\r\n\r\n        if (a.Date < b.Date)\r\n            return -1;\r\n\r\n        if (a.Date > b.Date)\r\n            return 1;\r\n\r\n        return 0;\r\n    }\r\n}","'use strict';\r\n\r\nclass Member {\r\n\r\n    constructor(obj) {\r\n        if (obj) {\r\n            this.ID = obj.ID;\r\n            this.Avatar = obj.Avatar;\r\n\r\n            if (obj instanceof Person)\r\n                this.Name = obj.nameTotal;\r\n            else\r\n                this.Name = obj.Name;\r\n        }\r\n        else {\r\n            this.ID = 0;\r\n            this.Avatar = null;\r\n            this.Name = '';\r\n        }\r\n    }\r\n\r\n    match(filter) {\r\n        if (!filter || filter == '')\r\n            return true;\r\n\r\n        let regex = new RegExp(filter, \"i\");\r\n        return this.Name.search(regex) >= 0;\r\n    }\r\n}","'use strict';\r\n\r\nclass Person {\r\n\r\n    constructor(obj) {\r\n        if (obj) {\r\n            this.ID = obj.ID;\r\n            this.Avatar = obj.Avatar;\r\n            this.Name = obj.Name;\r\n            this.Gender = obj.Gender;\r\n\r\n            this.Email = obj.Email || '';\r\n            this.Phone = obj.Phone || '';\r\n\r\n            this.DateBirth = (obj.DateBirth) ? new Date(obj.DateBirth) : null;\r\n            this.DateDeath = (obj.DateDeath) ? new Date(obj.DateDeath) : null;\r\n        }\r\n        else {\r\n            this.ID = 0;\r\n            this.Avatar = null;\r\n            this.Name = {'First': '', 'Last': '', 'Second': '', 'Maiden': ''};\r\n            this.Gender = 1;\r\n            this.Email = '';\r\n            this.Phone = '';\r\n            this.DateBirth = null;\r\n            this.DateDeath = null;\r\n        }\r\n    }\r\n\r\n    get nameFull() {\r\n        return this.Name.Last + ' ' + this.Name.First + ' ' + this.Name.Second;\r\n    }\r\n\r\n    get nameTotal() {\r\n        let maiden = (this.Name.Maiden && this.Name.Maiden.length > 0) ? ` (${this.Name.Maiden})` : '';\r\n        return `${this.Name.Last}${maiden} ${this.Name.First} ${this.Name.Second}`;\r\n    }\r\n\r\n    getNameFirstLine() {\r\n        let maiden = (this.Name.Maiden && this.Name.Maiden.length > 0) ? ` (${this.Name.Maiden})` : '';\r\n        return `${this.Name.Last}${maiden}`;\r\n    }\r\n\r\n    getNameSecondLine(){\r\n        return  `${this.Name.First} ${this.Name.Second}`;\r\n    }\r\n\r\n    match(filter) {\r\n        if (!filter || filter == '')\r\n            return true;\r\n\r\n        let text = this.Name.First + ' ' + this.Name.Second + ' ' + this.Name.Last + ' ' + this.Name.Maiden;\r\n\r\n        let regex = new RegExp(filter, \"i\");\r\n\r\n        return text.search(regex) >= 0;\r\n    }\r\n\r\n    getDates() {\r\n        let result = '';\r\n\r\n        if (this.DateBirth != null && this.DateBirth != undefined)\r\n            result += this.DateBirth.toRussianString();\r\n\r\n        if (this.DateDeath != null && this.DateDeath != undefined)\r\n            result += ' - ' + this.DateDeath.toRussianString();\r\n\r\n        return result;\r\n    }\r\n}","'use strict';\r\n\r\nclass Token {\r\n    constructor(obj) {\r\n        if (obj) {\r\n            this.Key = obj.Key;\r\n            this.Login = obj.Login;\r\n            this.Name = obj.Name;\r\n            this.Avatar = obj.Avatar;\r\n            this.Expire = new Date(obj.Expire);\r\n            this.Roles = obj.Roles;\r\n            this.Values = obj.Values || [];\r\n        }\r\n        else {\r\n            this.Key = null;\r\n            this.Login = null;\r\n            this.Name = {'First': '', 'Last': ''};\r\n            this.Avatar = null;\r\n            this.Expire = null;\r\n            this.Roles = [];\r\n            this.Values = [];\r\n        }\r\n    }\r\n\r\n    getValue(name){\r\n        if (this.Values == undefined || this.Values ==null || this.Values.length <= 0)\r\n            return '';\r\n\r\n        for (let i = 0; i < this.Values.length; i++)\r\n            if (this.Values[i].Name.toLowerCase() == name.toLowerCase())\r\n                return this.Values[i].Value || '';\r\n\r\n        return '';\r\n    }\r\n\r\n    isAuthenticated() {\r\n        return this.Key && this.Key.length > 0 && this.Expire && this.Expire > Date.now();\r\n    }\r\n\r\n    isInRole(role) {\r\n        if (!this.isAuthenticated())\r\n            return false;\r\n\r\n        return this.Roles && this.Roles.length > 0 && this.Roles.indexOf(role) >= 0;\r\n    }\r\n\r\n    isAdmin() {\r\n        return this.isInRole(ManagerRoleType.Admin);\r\n    }\r\n\r\n    isSupervisor() {\r\n        return this.isInRole(ManagerRoleType.Supervisor);\r\n    }\r\n\r\n    isRedactor() {\r\n        return this.isAdmin() || this.isSupervisor();\r\n    }\r\n}","'use strict';\r\n\r\nangular.module('app')\r\n    .controller('articlesController', ['$scope', '$routeParams', '$element', 'articlesService', 'materialsService',\r\n        function ($scope, $routeParams, $element, articlesService, materialsService) {\r\n\r\n            if (!$scope.authService.isAuthenticated())\r\n                $scope.navigationService.navigateToLogin();\r\n\r\n            this.articles = [];\r\n            this.article = new Article();\r\n\r\n            this.materialToDelete = null;\r\n            this.materialToUpdate = null;\r\n\r\n            this.reload = function (id) {\r\n                if (id == undefined || id == null)\r\n                    id = $routeParams.id;\r\n\r\n                if (id > 0)\r\n                    articlesService.getByID(id).success(function (data) {\r\n                        this.article = new Article(data, materialsService);\r\n                        this.reloadMediaGallery(this.article.Materials);\r\n                    }.bind(this));\r\n                else\r\n                    this.article = new Article();\r\n            };\r\n\r\n            this.reloadAll = function () {\r\n                articlesService.getAll().success(function (data) {\r\n                    for (let i = 0; i < data.length; i++)\r\n                        this.articles.push(new Article(data[i], materialsService));\r\n                }.bind(this));\r\n            };\r\n\r\n            this.reloadAllByPerson = function (personID) {\r\n                articlesService.getAllByPerson(personID).success(function (data) {\r\n                    for (let i = 0; i < data.length; i++)\r\n                        this.articles.push(new Article(data[i], materialsService));\r\n                }.bind(this));\r\n            };\r\n\r\n            this.reloadMediaGallery = function (materials) {\r\n                var items = [];\r\n                for (let i = 0; i < materials.length; i++) {\r\n                    let material = materials[i];\r\n                    items.push({\r\n                        id: material.Url,\r\n                        type: material.Type,\r\n                        url: material.ContentUrl,\r\n                        thumbnail: material.ThumbnailUrl,\r\n                        filename: material.FileName,\r\n                        title: material.Title,\r\n                        date: material.Date,\r\n                        comment: material.Comment\r\n                    });\r\n                }\r\n\r\n                $element.find('.sxmg').sxMediaGallery({\r\n                    items: items\r\n                });\r\n            };\r\n\r\n            this.createArticle = function () {\r\n                $scope.navigationService.modalClose('#create-article-dialog');\r\n                articlesService.createArticle(this.article.Title).success(function (data) {\r\n                    $scope.navigationService.navigateToArticleModify(data.ID);\r\n                }.bind(this));\r\n            };\r\n\r\n            this.updateArticle = function () {\r\n                if (this.article) {\r\n                    articlesService.updateArticle(this.article).success(function (data) {\r\n                        $scope.navigationService.navigateToArticleList();\r\n                    }.bind(this));\r\n                }\r\n            };\r\n\r\n            this.fileUploaded = function (file) {\r\n                if (this.article) {\r\n                    materialsService.createMaterial(this.article.ID, file.Code).success(function (data) {\r\n                        this.article.addMaterial(data, materialsService);\r\n                    }.bind(this));\r\n                }\r\n            };\r\n\r\n            this.showDeleteMaterialDialog = function (material) {\r\n                this.materialToDelete = material;\r\n                $('#delete-material-dialog').modal('show');\r\n            };\r\n\r\n            this.showUpdateMaterialDialog = function (material) {\r\n                this.materialToUpdate = material;\r\n                $('#update-material-dialog').modal('show');\r\n            };\r\n\r\n            this.deleteMaterial = function () {\r\n                if (this.materialToDelete) {\r\n                    materialsService.deleteMaterial(this.materialToDelete.ID)\r\n                        .success(function () {\r\n                            this.article.removeMaterial(this.materialToDelete);\r\n                        }.bind(this))\r\n                        .finally(function () {\r\n                            this.materialToDelete = null;\r\n                        }.bind(this));\r\n                }\r\n            };\r\n\r\n            this.updateMaterial = function () {\r\n                if (this.materialToUpdate) {\r\n                    materialsService.updateMaterial(this.materialToUpdate);\r\n                    this.materialToUpdate = null;\r\n                }\r\n            };\r\n        }]);","'use strict';\r\n\r\nangular.module('app')\r\n    .controller('authController', ['$scope', '$rootScope', 'personsService',\r\n        function ($scope, $rootScope, personsService) {\r\n\r\n            this.token = null;\r\n            this.login = '';\r\n            this.password = '';\r\n\r\n            this.enter = function () {\r\n                $scope.authService.login(this.login, this.password, function () {\r\n                    $rootScope.$broadcast('FamilyAuthentication');\r\n                    $scope.navigationService.navigateToRoot();\r\n                }.bind(this));\r\n            };\r\n\r\n            this.exit = function () {\r\n                this.token = null;\r\n                $scope.authService.logout();\r\n                $rootScope.navigationService.navigateToRoot();\r\n            };\r\n\r\n            this.reload = function () {\r\n                this.token = $scope.authService.getToken();\r\n            };\r\n\r\n            this.registrationInit = function () {\r\n                this.registration = {};\r\n            };\r\n\r\n            this.registrationComplete = function () {\r\n                $scope.authService.registration(this.registration).success(function () {\r\n                    $.snackbar({\r\n                        content: `Спасибо, Вы отправили запрос на регистрацию!<br>После рассмотрения, мы отправим Вам письмо (email) с дальнейшей информацией!`,\r\n                        timeout: 10000,\r\n                        htmlAllowed: true\r\n                    });\r\n\r\n                    $scope.navigationService.navigateToRoot();\r\n                }.bind(this));\r\n            };\r\n\r\n            this.showInviteGuestDialog = function () {\r\n                this.guest = new Guest();\r\n                $('#invite-guest-dialog').modal('show');\r\n            };\r\n\r\n            this.inviteGuest = function () {\r\n                if (this.guest.Password != this.guest.PasswordConfirm) {\r\n                    $.snackbar({\r\n                        content: `Указанные пароли не совпадают!`,\r\n                        style: 'error',\r\n                        timeout: 5000,\r\n                        htmlAllowed: true\r\n                    });\r\n                }\r\n                else {\r\n                    personsService.inviteGuest(this.guest).success(function () {\r\n                        let guestInfo = `Успешно приглашен новый гость с логином <strong>${this.guest.Login}</strong>.<br> `;\r\n                        let emailInfo = `Ему на почту <strong>${this.guest.Email}</strong> было отправлено письмо с доступом к сайту!`;\r\n                        let content = guestInfo + ((this.guest.Email) ? emailInfo : '');\r\n                        $.snackbar({\r\n                            content: content,\r\n                            timeout: 10000,\r\n                            htmlAllowed: true\r\n                        });\r\n                        this.guest = null;\r\n                        $('#invite-guest-dialog').modal('hide');\r\n                    }.bind(this));\r\n                }\r\n            };\r\n\r\n            $scope.$on('FamilyAuthentication', this.reload.bind(this));\r\n        }]);","'use strict';\r\n\r\nangular.module('app')\r\n    .controller('personsController', ['$scope', '$routeParams', 'personsService', 'articlesService',\r\n        function ($scope, $routeParams, personsService, articlesService) {\r\n\r\n            this.persons = [];\r\n            this.person = new Person();\r\n            this.articles = [];\r\n\r\n            let getPerson = function (data) {\r\n                this.person = new Person(data);\r\n            }.bind(this);\r\n\r\n            let getPersons = function (data) {\r\n                for (let i = 0; i < data.length; i++)\r\n                    this.persons.push(new Person(data[i]));\r\n            }.bind(this);\r\n\r\n            let getArticles = function (data) {\r\n                for (let i = 0; i < data.length; i++)\r\n                    this.articles.push(new Article(data[i]));\r\n            }.bind(this);\r\n\r\n            this.reload = function (id) {\r\n                if (id == undefined || id == null)\r\n                    id = $routeParams.id;\r\n\r\n                if (id > 0)\r\n                    personsService.get(id).success(getPerson);\r\n                else\r\n                    this.person = new Person();\r\n            };\r\n\r\n            this.reloadAll = function () {\r\n                personsService.getAll().success(getPersons);\r\n            };\r\n\r\n            this.reloadWithArticles = function (id) {\r\n                if (id == undefined || id == null)\r\n                    id = $routeParams.id;\r\n\r\n                this.reload(id);\r\n\r\n                articlesService.getAllByPerson(id).success(getArticles);\r\n            };\r\n\r\n            this.createPerson = function () {\r\n                $scope.navigationService.modalClose('#create-person-dialog');\r\n\r\n                if (!this.person)\r\n                    return;\r\n\r\n                personsService.createPerson(this.person).success(function (data) {\r\n                    $scope.navigationService.navigateToPersonModify(data.ID);\r\n                }.bind(this));\r\n            };\r\n\r\n            this.updatePerson = function () {\r\n                if (!this.person)\r\n                    return;\r\n\r\n                personsService.updatePerson(this.person).success(function () {\r\n                    $scope.navigationService.navigateToPersonList();\r\n                }.bind(this));\r\n            };\r\n\r\n            this.showCreateManagerDialog = function () {\r\n                if (!this.person || !$scope.authService.isAdmin())\r\n                    return;\r\n\r\n                this.manager = new Manager(this.person ? this.person.Email || '' : '');\r\n                this.manager.addRole(ManagerRoleType.User);\r\n\r\n                $('#create-manager-dialog').modal('show');\r\n\r\n                if (this.person.Email == undefined || this.person.Email == null || this.person.Email == '') {\r\n                    $.snackbar({\r\n                        content: `<strong>Обратите внимение</strong>, что не указан E-mail,<br> на который нужно отправлять письмо с доступом!!!`,\r\n                        timeout: 7000,\r\n                        htmlAllowed: true\r\n                    });\r\n                }\r\n            };\r\n\r\n            this.createManager = function () {\r\n                if (!$scope.authService.isAdmin())\r\n                    return;\r\n\r\n                personsService.createManager(this.person.ID, this.manager.login, this.manager.password, this.manager.getRolesString())\r\n                    .success(function () {\r\n                        $.snackbar({\r\n                            content: `Создан новый пользователь с логином <strong>${this.manager.login}</strong>.<br> Ему на почту <strong>${this.person.Email}</strong> было отправлено письмо с доступом к сайту!`,\r\n                            timeout: 10000,\r\n                            htmlAllowed: true\r\n                        });\r\n                        $('#create-manager-dialog').modal('hide');\r\n                    }.bind(this));\r\n            };\r\n        }]);","angular.module('app')\r\n    .controller('Ctrl', function ($scope) {\r\n        $scope.myImage = '';\r\n        $scope.myCroppedImage = '';\r\n\r\n        var handleFileSelect = function (evt) {\r\n            var file = evt.currentTarget.files[0];\r\n            var reader = new FileReader();\r\n            reader.onload = function (evt) {\r\n                $scope.$apply(function ($scope) {\r\n                    $scope.myImage = evt.target.result;\r\n                });\r\n            };\r\n            reader.readAsDataURL(file);\r\n        };\r\n        angular.element(document.querySelector('#fileInput')).on('change', handleFileSelect);\r\n    });","angular.module('app')\r\n    .directive('articleCard', [function () {\r\n        return {\r\n            restrict: 'AE',\r\n            scope: {\r\n                article: '=article',\r\n                classes: '@classes'\r\n            },\r\n            templateUrl: 'app/partials/article-card.partial.html',\r\n            controllerAs: 'vm',\r\n            controller: ['$scope', '$rootScope',\r\n                function ($scope, $rootScope) {\r\n                    $scope.authService = $rootScope.authService;\r\n                    $scope.navigationService = $rootScope.navigationService;\r\n\r\n                    this.smallComment = function () {\r\n                        if (!$scope.article || !$scope.article.Comment)\r\n                            return '';\r\n                        else if ($scope.article.Comment.length > 60)\r\n                            return $scope.article.Comment.substr(0, 60) + '...'\r\n                        else\r\n                            return $scope.article.Comment;\r\n                    };\r\n                }]\r\n        };\r\n    }]);\r\n","'use strict';\r\n\r\nangular.module('app')\r\n    .directive('articleList', [function () {\r\n        return {\r\n            restrict: 'AE',\r\n            scope: {\r\n                articles: '=articles',\r\n                filter: '@filter'\r\n            },\r\n            templateUrl: 'app/partials/article-list.partial.html',\r\n            controllerAs: 'vm',\r\n            controller: ['$scope', '$rootScope',\r\n                function ($scope, $rootScope) {\r\n                    this.filter = '';\r\n\r\n                    this.isFilterVisible = true;\r\n                    if ($scope.filter === false || $scope.filter == \"false\" || $scope.filter == \"none\")\r\n                        this.isFilterVisible = false;\r\n                    else\r\n                        this.filter = $scope.filter;\r\n\r\n                    $scope.authService = $rootScope.authService;\r\n                    $scope.navigationService = $rootScope.navigationService;\r\n                }]\r\n        };\r\n    }]);\r\n","angular.module('app')\r\n    .directive('articleMaterial', [\r\n        function () {\r\n            return {\r\n                restrict: 'AE',\r\n                scope: {\r\n                    article: '=article',\r\n                    material: '=material',\r\n                    editMaterial: '&editMaterial',\r\n                    removeMaterial: '&removeMaterial'\r\n                },\r\n                require: ['ngModel'],\r\n                templateUrl: 'app/partials/article-material.partial.html',\r\n                controllerAs: 'vm',\r\n                controller: ['$scope', '$element', 'fileService', 'articlesService','materialsService',\r\n                    function ($scope, $element, fileService, articlesService, materialsService) {\r\n\r\n                        this.getUniqueThumbnailUrl = function () {\r\n                            //return articlesService.getMaterialThumbnailUrl($scope.material, '&guid=' + fileService.makeGuid());\r\n                            return $scope.material.ThumbnailUrl + '&guid=' + fileService.makeGuid();\r\n                        };\r\n\r\n                        $scope.thumbnailUrl = this.getUniqueThumbnailUrl();\r\n\r\n                        this.editMaterial = function () {\r\n                            if ($scope.editMaterial)\r\n                                $scope.editMaterial({material: $scope.material});\r\n                        };\r\n\r\n                        this.removeMaterial = function () {\r\n                            if ($scope.removeMaterial)\r\n                                $scope.removeMaterial({material: $scope.material});\r\n                        };\r\n\r\n                        this.rotateMaterial = function (clockwise) {\r\n                            return materialsService.rotateMaterial($scope.material.ID, clockwise)\r\n                                .success(function () {\r\n                                    $scope.thumbnailUrl = this.getUniqueThumbnailUrl();\r\n                                }.bind(this));\r\n                        };\r\n                    }]\r\n            };\r\n        }]);","angular.module('app')\r\n    .directive('avatarEditor', ['fileService', function (fileService) {\r\n        return {\r\n            restrict: 'AE',\r\n            scope: {\r\n                avatar: '=avatarEditor'\r\n            },\r\n            templateUrl: 'app/partials/avatar-editor.partial.html',\r\n            controllerAs: 'vm',\r\n            controller: ['$scope', function ($scope) {\r\n                $scope.fileService = fileService;\r\n\r\n                $scope.avatarFile = null;\r\n                $scope.avatarPreview = null;\r\n\r\n                angular.element(document.querySelector('#avatarFile')).on('change', function (evt) {\r\n                    var file = evt.currentTarget.files[0];\r\n                    var reader = new FileReader();\r\n                    reader.onload = function (evt) {\r\n                        $scope.$apply(function ($scope) {\r\n                            $scope.avatarFile = evt.target.result;\r\n                        });\r\n                    };\r\n                    reader.readAsDataURL(file);\r\n                });\r\n\r\n\r\n                this.displayAvatarModal = function (show) {\r\n                    angular.element(document.querySelector('#avatar-modal')).modal(show ? 'show' : 'hide');\r\n                };\r\n\r\n                this.cancel = function () {\r\n                    this.displayAvatarModal(false);\r\n                };\r\n\r\n                this.apply = function () {\r\n                    $scope.avatar = $scope.avatarPreview;\r\n                    this.displayAvatarModal(false);\r\n                };\r\n\r\n            }]\r\n        };\r\n    }]);\r\n","angular.module('app')\r\n    .directive('avatar', ['fileService', function (fileService) {\r\n        return {\r\n            restrict: 'AE',\r\n            scope: {\r\n                avatar: '=avatar',\r\n                size: '@size',\r\n                alternate: '@alternate',\r\n                classes: '@classes',\r\n                personID: '@personId'\r\n            },\r\n            templateUrl: 'app/partials/avatar.partial.html',\r\n            controllerAs: 'vm',\r\n            controller: ['$scope', '$rootScope', function ($scope, $rootScope) {\r\n                $scope.navigationService = $rootScope.navigationService;\r\n                $scope.fileService = fileService;\r\n\r\n                this.onClick = function ($event) {\r\n                    if ($scope.personID >= 0) {\r\n                        $event.stopPropagation();\r\n                        $scope.navigationService.navigateToPersonShow($scope.personID);\r\n                    }\r\n                };\r\n            }],\r\n            link: function (scope, element, attributes) {\r\n                let image = element.find(\"img\");\r\n\r\n                let size = attributes.size;\r\n                if (!size || size <= 0)\r\n                    size = 100;\r\n\r\n                image.css({width: size, height: size});\r\n\r\n                image.attr('title', attributes.alternate);\r\n                //image.attr('alt', attributes.alternate);\r\n\r\n                image.tooltip();\r\n            }\r\n        };\r\n    }]);\r\n","angular.module('app')\r\n    .directive('fileUpload', ['URLS',\r\n        function (URLS) {\r\n            return {\r\n                restrict: 'AE',\r\n                scope: {\r\n                    fileCode: '=fileCode',\r\n                    multipleFiles: '@multipleFiles',\r\n                    fileUploaded: '&fileUploaded'\r\n                },\r\n                require: ['ngModel'],\r\n                templateUrl: 'app/partials/file-upload.partial.html',\r\n                controllerAs: 'vm',\r\n                controller: ['$scope', 'authService', 'fileService', 'URLS',\r\n                    function ($scope, authService, fileService, URLS) {\r\n\r\n                        this.blob = null;\r\n                        this.isUploading = false;\r\n                        this.uploadingFileName = '';\r\n\r\n                        // generate new Flow instance to upload files\r\n                        this.flow = new Flow({\r\n                            target: URLS.API.BASE + URLS.API.FILEUPLOAD,\r\n                            headers: {\r\n                                'Authorization': 'Token ' + authService.getTokenKey()\r\n                            },\r\n                            query: {\r\n                                'flowUploadID': fileService.makeGuid()\r\n                            },\r\n                            singleFile: !$scope.multipleFiles,\r\n                            testChunks: false,\r\n                            permanentErrors: [404, 500, 501],\r\n                            //chunkSize: 512000,\r\n                            maxChunkRetries: 1,\r\n                            chunkRetryInterval: 5000,\r\n                            simultaneousUploads: 1\r\n                        });\r\n\r\n                        this.flow.on('uploadStart', function () {\r\n                            this.isUploading = true;\r\n                        }.bind(this));\r\n\r\n                        this.flow.on('complete', function () {\r\n                            this.isUploading = false;\r\n                            this.flow.files = [];\r\n                        }.bind(this));\r\n\r\n                        this.flow.on('fileProgress', function (file, chunk) {\r\n                            this.uploadingFileName = file.name;\r\n                        }.bind(this));\r\n\r\n                        this.flow.on('fileSuccess', function (file, message, chunk) {\r\n                            var fileBlob = JSON.parse(message);\r\n\r\n                            if ($scope.fileUploaded)\r\n                                $scope.fileUploaded({file: fileBlob});\r\n\r\n                            if (!$scope.multipleFiles)\r\n                                this.reload(fileBlob);\r\n                        }.bind(this));\r\n\r\n\r\n                        this.upload = function () {\r\n                            this.flow.upload();\r\n                        };\r\n\r\n                        this.reload = function (fileBlob) {\r\n                            if (fileBlob != undefined)\r\n                                this.blob = fileBlob;\r\n                            else if ($scope.fileCode)\r\n                                fileService.getBlob($scope.fileCode).success(function (data) {\r\n                                    this.blob = data;\r\n                                }.bind(this));\r\n                            else this.blob = null;\r\n                        };\r\n\r\n                        this.download = function () {\r\n                            if ($scope.fileCode)\r\n                                fileService.download($scope.fileCode);\r\n                        };\r\n\r\n                        if (!$scope.multipleFiles)\r\n                            this.reload();\r\n                    }]\r\n            };\r\n        }]);","'use strict';\r\n\r\nangular.module('app')\r\n    .directive('memberList', [function () {\r\n        return {\r\n            restrict: 'AE',\r\n            scope: {\r\n                members: '=members'\r\n            },\r\n            templateUrl: 'app/partials/member-list.partial.html',\r\n            controllerAs: 'vm',\r\n            controller: ['$scope', '$rootScope', 'personsService',\r\n                function ($scope, $rootScope, personsService) {\r\n\r\n                    this.filter = '';\r\n                    this.persons = [];\r\n\r\n                    personsService.getAll().success(function (data) {\r\n                        for (let i = 0; i < data.length; i++)\r\n                            this.persons.push(new Person(data[i]));\r\n                        $('#add-member-button').show();\r\n                    }.bind(this));\r\n\r\n                    this.indexOfMember = function (member) {\r\n                        if (!member)\r\n                            return -1;\r\n\r\n                        let isNumber = typeof member == 'number';\r\n                        let isPerson = member instanceof Person;\r\n\r\n                        for (let i = 0; i < $scope.members.length; i++) {\r\n                            if (isNumber && $scope.members[i].ID == member)\r\n                                return i;\r\n                            else if (isPerson && ($scope.members[i] == member || $scope.members[i].ID == member.ID))\r\n                                return i;\r\n                        }\r\n\r\n                        return -1;\r\n                    };\r\n\r\n                    this.existMember = function (id) {\r\n                        return this.indexOfMember(id) >= 0;\r\n                    };\r\n\r\n                    this.addMember = function (person) {\r\n                        if (!person || this.existMember(person.ID))\r\n                            return;\r\n\r\n                        $scope.members.push(new Member(person));\r\n                    };\r\n\r\n                    this.removeMember = function (id) {\r\n                        let index = this.indexOfMember(id);\r\n                        while (index >= 0) {\r\n                            $scope.members.splice(index, 1);\r\n                            index = this.indexOfMember(id);\r\n                        }\r\n                    };\r\n                }]\r\n        };\r\n    }]);\r\n","angular.module('app')\r\n    .directive('personCard', [function () {\r\n        return {\r\n            restrict: 'AE',\r\n            scope: {\r\n                person: '=person',\r\n                classes: '@classes'\r\n            },\r\n            templateUrl: 'app/partials/person-card.partial.html',\r\n            controllerAs: 'vm',\r\n            controller: ['$scope', '$rootScope',\r\n                function ($scope, $rootScope) {\r\n                    $scope.authService = $rootScope.authService;\r\n                    $scope.navigationService = $rootScope.navigationService;\r\n                }]\r\n        };\r\n    }]);\r\n","'use strict';\r\n\r\nangular.module('app')\r\n    .directive('personList', [function () {\r\n        return {\r\n            restrict: 'AE',\r\n            scope: {\r\n                persons: '=persons'\r\n            },\r\n            templateUrl: 'app/partials/person-list.partial.html',\r\n            controllerAs: 'vm',\r\n            controller: ['$scope',\r\n                function ($scope) {\r\n                    this.filter = '';\r\n                }]\r\n        };\r\n    }]);\r\n","angular.module('app')\r\n    .filter('articleSearch', function () {\r\n        return function (input, search) {\r\n            var out = [];\r\n\r\n            if (input && input.length) {\r\n\r\n                for (var i = 0; i < input.length; i++) {\r\n                    var article = new Article(input[i]);\r\n\r\n                    if (article.match(search))\r\n                        out.push(input[i]);\r\n                }\r\n            }\r\n\r\n            return out;\r\n        };\r\n    });","angular.module('app')\r\n    .filter('personSearch', function () {\r\n        return function (input, search) {\r\n            var out = [];\r\n\r\n            if (input && input.length) {\r\n                for (var i = 0; i < input.length; i++) {\r\n                    var person = new Person(input[i]);\r\n\r\n                    if (person.match(search))\r\n                        out.push(input[i]);\r\n                }\r\n            }\r\n\r\n            return out;\r\n        };\r\n    });","angular.module('app')\r\n    .factory('articlesService', ['$http', 'authService', 'URLS',\r\n        function ($http, authService, URLS) {\r\n            return {\r\n                getAll: function () {\r\n                    return $http.get(URLS.API.BASE + 'article');\r\n                },\r\n                getAllByPerson: function (personID) {\r\n                    return $http.get(URLS.API.BASE + 'person/' + personID + '/articles');\r\n                },\r\n                getByID: function (id) {\r\n                    return $http.get(URLS.API.BASE + 'article/' + id);\r\n                },\r\n                createArticle: function (title) {\r\n                    let data = {'Title': title};\r\n                    return $http.post(URLS.API.BASE + 'article', data);\r\n                },\r\n                updateArticle: function (article) {\r\n                    let personIDs = [];\r\n                    if (article.Members && article.Members.length > 0)\r\n                        for (let i = 0; i < article.Members.length; i++)\r\n                            personIDs.push(article.Members[i].ID);\r\n\r\n                    let data = {\r\n                        'Title': article.Title,\r\n                        'PeriodBegin': article.PeriodBegin,\r\n                        'PeriodEnd': article.PeriodEnd,\r\n                        'Comment': article.Comment,\r\n                        'Persons': personIDs\r\n                    };\r\n                    return $http.post(URLS.API.BASE + 'article/' + article.ID, data);\r\n                }\r\n            };\r\n        }]);","angular.module('app')\r\n    .factory('authService', ['$http', 'URLS', 'localStorageService',\r\n        function ($http, URLS, localStorageService) {\r\n            return {\r\n                setToken: function (token) {\r\n                    localStorageService.set('token', token);\r\n                },\r\n                getToken: function () {\r\n                    return new Token(localStorageService.get('token'));\r\n                },\r\n                getTokenKey: function () {\r\n                    let token = this.getToken();\r\n                    return (token && token.Key) ? token.Key : null;\r\n                },\r\n                removeToken: function () {\r\n                    localStorageService.remove('token');\r\n                },\r\n                registration: function (registration) {\r\n                    return $http.post(URLS.API.BASE + 'user/registration', registration);\r\n                },\r\n                login: function (login, password, onSuccess, onError) {\r\n\r\n                    // auth request body to be send\r\n                    var request = {'Login': login, 'Password': password};\r\n\r\n                    return $http.post(URLS.API.BASE + 'auth', request)\r\n                        .success(function (data) {\r\n                            // set local storage variable\r\n                            this.setToken(data);\r\n\r\n                            // set auth header to all requests\r\n                            this.redefineHeaders();\r\n\r\n                            // continue with success\r\n                            if (onSuccess) onSuccess(data);\r\n                        }.bind(this))\r\n                        .error(function (data, status) {\r\n                            // remove local storage variable\r\n                            this.removeToken();\r\n\r\n                            // set auth header to null\r\n                            this.redefineHeaders(null);\r\n\r\n                            // continue with error\r\n                            if (onError) onError(data, status);\r\n                        }.bind(this));\r\n                },\r\n                logout: function () {\r\n                    // remove local storage variable\r\n                    this.removeToken();\r\n\r\n                    // set auth header to null\r\n                    this.redefineHeaders(null);\r\n                },\r\n                isAuthenticated: function () {\r\n                    let token = this.getToken();\r\n                    return token && token.isAuthenticated();\r\n                },\r\n                isInRole: function (role) {\r\n                    let token = this.getToken();\r\n                    return token && token.isInRole(role);\r\n                },\r\n                isRedactor: function () {\r\n                    let token = this.getToken();\r\n                    return token && token.isRedactor();\r\n                },\r\n                isAdmin: function () {\r\n                    let token = this.getToken();\r\n                    return token && token.isAdmin();\r\n                },\r\n                getSASToken:function(){\r\n                    let token = this.getToken();\r\n                    return token.getValue(\"sas\") || '';\r\n                },\r\n                redefineHeaders: function (authorizationHeader) {\r\n                    if (authorizationHeader == undefined) {\r\n                        let key = this.getTokenKey();\r\n                        authorizationHeader = (key) ? 'Token ' + key : null;\r\n                    }\r\n\r\n                    $http.defaults.headers.common['Authorization'] = authorizationHeader;\r\n                }\r\n            };\r\n        }]);","angular.module('app')\r\n    .factory('fileService', ['$http', 'URLS', 'authService',\r\n        function ($http, URLS, authService) {\r\n            return {\r\n                // make (GUID) to differentiate uploads\r\n                makeGuid: function () {\r\n                    function s4() {\r\n                        return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\r\n                    }\r\n\r\n                    return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\r\n                },\r\n                //getServerUrl: function (url) {\r\n                //    if (url.startsWith('~') || url.startsWith('/')) {\r\n                //        let token = authService.getTokenKey();\r\n                //        return URLS.API.SERVER + url.replace(/^~?\\/?/, '') + '?Token=' + token;\r\n                //    }\r\n                //    else return url;\r\n                //},\r\n                getAvatarSrc: function (avatar) {\r\n                    if (avatar == undefined || avatar == null || avatar == '')\r\n                        return './images/avatar.jpg';\r\n\r\n                    if (avatar.startsWith('data:'))\r\n                        return avatar;\r\n\r\n                    return URLS.API.BASE + 'avatar/' + avatar;\r\n                },\r\n                getBlob: function (code) {\r\n                    return $http.get(URLS.API.BASE + 'file/' + code);\r\n                },\r\n                //getBlobUrl: function (code) {\r\n                //    return $http.get(URLS.API.BASE + 'file/' + code + '/url');\r\n                //},\r\n                //getBlobContentUrl: function (code) {\r\n                //    let token = authService.getTokenKey();\r\n                //    return URLS.API.BASE + 'file/' + code + '/content?Token=' + token;\r\n                //},\r\n                //getBlobAvatarUrl: function (code) {\r\n                //    let token = authService.getTokenKey();\r\n                //    if (!token)\r\n                //        return;\r\n                //    return URLS.API.BASE + 'file/' + code + '/avatar?Token=' + token;\r\n                //},\r\n                download: function (code) {\r\n                    let token = authService.getTokenKey();\r\n                    let url = URLS.API.BASE + 'file/' + code + '/content?Token=' + token;\r\n                    $window.open(url);\r\n                }\r\n            };\r\n        }]);","angular.module('app')\r\n    .factory('materialsService', ['$http', 'authService', 'URLS',\r\n        function ($http, authService, URLS) {\r\n            return {\r\n                createMaterial: function (articleID, fileCode) {\r\n                    let data = {'ArticleID': articleID, 'FileCode': fileCode};\r\n                    return $http.post(URLS.API.BASE + '/material', data);\r\n                },\r\n                updateMaterial: function (material) {\r\n                    let data = {'Date': material.Date, 'Title': material.Title, 'Comment': material.Comment};\r\n                    return $http.post(URLS.API.BASE + '/material/' + material.ID, data);\r\n                },\r\n                deleteMaterial: function (materialID) {\r\n                    return $http.delete(URLS.API.BASE + '/material/' + materialID);\r\n                },\r\n                downloadMaterial: function (material) {\r\n                    let url = this.getMaterialContentUrl(material);\r\n                    $window.open(url);\r\n                },\r\n                transformMaterial: function (materialID, method, argument) {\r\n                    let data = {'Method': method, 'Argument': argument};\r\n                    return $http.post(URLS.API.BASE + '/material/' + materialID + '/transform', data);\r\n                },\r\n                rotateMaterial: function (materialID, clockwise) {\r\n                    return this.transformMaterial(materialID, 'rotate', clockwise ? 'true' : 'false');\r\n                },\r\n                getMaterialUrl: function (url, extraParams) {\r\n                    let extra = (extraParams == undefined || extraParams == null) ? '' : extraParams;\r\n                    return URLS.STORAGEURL + url + authService.getSASToken() + extra;\r\n                },\r\n                getMaterialContentUrl: function (material, extraParams) {\r\n                    if (material == undefined || material == null)\r\n                        return null;\r\n\r\n                    if (typeof material == 'string')\r\n                        return this.getMaterialUrl(material, extraParams);\r\n\r\n                    if (material instanceof Material)\r\n                        return this.getMaterialUrl(material.Url, extraParams);\r\n\r\n                    return null;\r\n                },\r\n                getMaterialThumbnailUrl: function (material, extraParams) {\r\n                    if (material == undefined || material == null)\r\n                        return null;\r\n\r\n                    let suffix = '.thumbnail.jpg';\r\n\r\n                    if (typeof material == 'string')\r\n                        return this.getMaterialUrl(material + suffix, extraParams);\r\n\r\n                    if (material instanceof Material)\r\n                        return this.getMaterialUrl(material.Url + suffix, extraParams);\r\n\r\n                    return null;\r\n                }\r\n            };\r\n        }]);","angular.module('app')\r\n    .factory('navigationService', ['URLS', '$location', 'authService',\r\n        function (URLS, $location, authService) {\r\n            return {\r\n                modalClose: function (modalID) {\r\n                    if (modalID)\r\n                        $(modalID).modal('hide');\r\n                    $('body').removeClass('modal-open');\r\n                    $('.modal-backdrop').remove();\r\n                },\r\n                navigateToRoot: function () {\r\n                    $location.path('/');\r\n                },\r\n                navigateToLogin: function () {\r\n                    $location.path('login');\r\n                },\r\n                navigateToRegistration: function () {\r\n                    $location.path('registration');\r\n                },\r\n                navigateToPersonList: function () {\r\n                    $location.path('persons/');\r\n                },\r\n                navigateToPersonShow: function (personID) {\r\n                    if (!authService.isAuthenticated())\r\n                        this.navigateToLogin();\r\n                    else\r\n                        $location.path('persons/' + personID);\r\n                },\r\n                navigateToPersonModify: function (personID) {\r\n                    if (!authService.isAuthenticated())\r\n                        this.navigateToLogin();\r\n                    else if (authService.isRedactor())\r\n                        $location.path('edit/person/' + personID);\r\n                    else\r\n                        this.navigateToRoot();\r\n                },\r\n                navigateToArticleList: function () {\r\n                    if (!authService.isAuthenticated())\r\n                        this.navigateToLogin();\r\n                    else\r\n                        $location.path('articles/');\r\n                },\r\n                navigateToArticleShow: function (articleID) {\r\n                    if (!authService.isAuthenticated())\r\n                        this.navigateToLogin();\r\n                    else\r\n                        $location.path('articles/' + articleID);\r\n                },\r\n                navigateToArticleModify: function (articleID) {\r\n                    if (!authService.isAuthenticated())\r\n                        this.navigateToLogin();\r\n                    else if (authService.isRedactor())\r\n                        $location.path('edit/article/' + articleID);\r\n                    else\r\n                        this.navigateToRoot();\r\n                }\r\n            };\r\n        }]);","angular.module('app')\r\n    .factory('personsService', ['$http', 'URLS', 'authService',\r\n        function ($http, URLS, authService) {\r\n            return {\r\n                getAll: function () {\r\n                    return $http.get(URLS.API.BASE + 'person');\r\n                },\r\n                get: function (id) {\r\n                    return $http.get(URLS.API.BASE + 'person/' + id);\r\n                },\r\n                createPerson: function (person) {\r\n                    let data = {'Name': person.Name};\r\n                    return $http.post(URLS.API.BASE + 'person', data);\r\n                },\r\n                updatePerson: function (person) {\r\n                    let data =\r\n                    {\r\n                        Name: person.Name,\r\n                        Gender: person.Gender,\r\n                        Avatar: person.Avatar,\r\n                        Email: person.Email,\r\n                        Phone: person.Phone,\r\n                        DateBirth: person.DateBirth,\r\n                        DateDeath: person.DateDeath\r\n                    };\r\n                    return $http.post(URLS.API.BASE + 'person/' + person.ID, data);\r\n                },\r\n                createManager: function (personID, login, password, roles) {\r\n                    if (!authService.isAdmin())\r\n                        throw new Error('Только администраторы могут создавать пользователей!');\r\n\r\n                    let data = {\r\n                        Login: login,\r\n                        Password: password || '',\r\n                        Roles: roles || 'User'\r\n                    };\r\n                    return $http.post(URLS.API.BASE + 'person/' + personID + '/manager', data);\r\n                },\r\n                inviteGuest: function(guest) {\r\n                   return $http.post(URLS.API.BASE + 'person/invite', guest);\r\n                }\r\n            };\r\n        }]);"],"sourceRoot":"/source/"}